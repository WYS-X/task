# Gin Blog Backend

ä¸€ä¸ªåŸºäº **Go + Gin + GORM + JWT** çš„åšå®¢ç³»ç»Ÿåç«¯ï¼Œå®ç°äº†ç”¨æˆ·æ³¨å†Œã€ç™»å½•è®¤è¯ã€æ–‡ç« å¢åˆ æ”¹æŸ¥ã€è¯„è®ºä¸æ·»åŠ è¯„è®ºç­‰æ ¸å¿ƒåŠŸèƒ½ï¼Œé€‚åˆä½œä¸ºå­¦ä¹ å’Œä¸­å°å‹é¡¹ç›®çš„åç«¯æ¨¡æ¿ã€‚

---

## ä¸€ã€é¡¹ç›®åŠŸèƒ½

### 1. ç”¨æˆ·æ¨¡å—
- ç”¨æˆ·æ³¨å†Œ
- ç”¨æˆ·ç™»å½•
- JWT é‰´æƒè®¤è¯

### 2. æ–‡ç« æ¨¡å—
- åˆ›å»ºæ–‡ç« ï¼ˆéœ€ç™»å½•ï¼‰
- ä¿®æ”¹æ–‡ç« ï¼ˆä»…ä½œè€…ï¼‰
- åˆ é™¤æ–‡ç« ï¼ˆä»…ä½œè€…ï¼‰
- æ–‡ç« åˆ—è¡¨
- æ–‡ç« è¯¦æƒ…

### 3. è¯„è®ºæ¨¡å—
- æ·»åŠ è¯„è®ºï¼ˆéœ€ç™»å½•ï¼‰
- è¯„è®ºåˆ—è¡¨ï¼ˆæŒ‰æ–‡ç« ï¼‰

---

## äºŒã€æŠ€æœ¯æ ˆ

- **Go**
- **Gin** v1.11.0 Web æ¡†æ¶
- **GORM**  v1.31.1 ORMï¼ˆæ”¯æŒ MySQL / PostgreSQL / SQLiteï¼‰
- **JWT** V5 ç”¨æˆ·è®¤è¯
- **Zap** v1.27.1 æ—¥å¿—

---

## ä¸‰ã€è¿è¡Œç¯å¢ƒè¦æ±‚

| ç»„ä»¶ | ç‰ˆæœ¬è¦æ±‚ |
|---|---|
| Go | >= 1.25 |
| æ•°æ®åº“ | MySQL 5.7+ï¼ˆæˆ–å…¶ä»– GORM æ”¯æŒçš„æ•°æ®åº“ï¼‰ |
| æ“ä½œç³»ç»Ÿ | Windows / Linux / macOS |

---

## å››ã€é¡¹ç›®ç»“æ„ç¤ºä¾‹

```text
blog-backend
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ main.go
â”œâ”€â”€ config/
â”‚   â””â”€â”€ config.yaml
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ router/
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ jwt/
â”‚   â””â”€â”€ logger/
â”œâ”€â”€ go.mod
â””â”€â”€ README.md
```

---

## äº”ã€ä¾èµ–å®‰è£…

### 1ï¸âƒ£ å®‰è£… Go ä¾èµ–

```bash
go mod tidy
```

ä¸»è¦ä¾èµ–ï¼š

```text
github.com/gin-gonic/gin
gorm.io/gorm
gorm.io/driver/mysql
github.com/golang-jwt/jwt/v5
go.uber.org/zap
```

---

### 2ï¸âƒ£ æ•°æ®åº“å‡†å¤‡ï¼ˆä»¥ MySQL ä¸ºä¾‹ï¼‰

```sql
CREATE DATABASE blog DEFAULT CHARSET utf8mb4;
```

é…ç½®æ•°æ®åº“è¿æ¥ï¼ˆç¤ºä¾‹ï¼‰ï¼š

```yaml
database:
  dsn: root:password@tcp(127.0.0.1:3306)/blog?charset=utf8mb4&parseTime=True&loc=Local
```

å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œæ•°æ®è¡¨è¿ç§»ï¼ˆAutoMigrateï¼‰ã€‚

---

## å…­ã€å¯åŠ¨æ–¹å¼

### æ–¹å¼ä¸€ï¼šç›´æ¥è¿è¡Œ

```bash
go run cmd/main.go
```

### æ–¹å¼äºŒï¼šç¼–è¯‘åè¿è¡Œ

```bash
go build -o blog
./blog
```

é»˜è®¤å¯åŠ¨åœ°å€ï¼š

```text
http://localhost:8080
```

---

## ä¸ƒã€æ¥å£æµ‹è¯•è¯´æ˜

å¯ä»¥ä½¿ç”¨ **Postman / Apifox / curl** å¯¹æ¥å£è¿›è¡Œæµ‹è¯•ã€‚

### é€šç”¨è¯´æ˜
- ç™»å½•æˆåŠŸåä¼šè¿”å› `token`
- éœ€è¦è®¤è¯çš„æ¥å£éœ€åœ¨ Header ä¸­æºå¸¦ï¼š

```text
Authorization: Bearer <token>
```

---

## å…«ã€æ¥å£è¯´æ˜ä¸æµ‹è¯•ç”¨ä¾‹ï¼ˆåŸºäºå½“å‰è·¯ç”±ï¼‰

> æ¥å£å‰ç¼€ç»Ÿä¸€ä¸ºï¼š`/api/v1`

---

### 1ï¸âƒ£ ç”¨æˆ·æ³¨å†Œ

**POST** `/api/v1/register`

è¯·æ±‚ä½“ï¼š

```json
{
  "email": "test@example.com",
  "password": "123456",
  "nickname": "testuser"
}
```

å“åº”ç¤ºä¾‹ï¼š

```json
{
  "code": 0,
  "message": "register success"
}
```

æµ‹è¯•ç»“æœï¼šâœ… æ³¨å†ŒæˆåŠŸ

---

### 2ï¸âƒ£ ç”¨æˆ·ç™»å½•

**POST** `/api/v1/login`

è¯·æ±‚ä½“ï¼š

```json
{
  "email": "test@example.com",
  "password": "123456"
}
```

å“åº”ç¤ºä¾‹ï¼š

```json
{
  "token": "<jwt_token>"
}
```

æµ‹è¯•ç»“æœï¼šâœ… è¿”å› JWT Token

---

### ğŸ” é‰´æƒè¯´æ˜ï¼ˆé‡è¦ï¼‰

ä»¥ä¸‹æ¥å£éœ€è¦ç™»å½•åè®¿é—®ï¼Œè¯·åœ¨ Header ä¸­æºå¸¦ JWTï¼š

```text
Authorization: Bearer <jwt_token>
```

---

### 3ï¸âƒ£ åˆ›å»ºæ–‡ç« 

**POST** `/api/v1/post`

è¯·æ±‚ä½“ï¼š

```json
{
  "title": "ç¬¬ä¸€ç¯‡åšå®¢",
  "content": "è¿™æ˜¯æ–‡ç« å†…å®¹"
}
```

æµ‹è¯•ç»“æœï¼šâœ… åˆ›å»ºæˆåŠŸ

---

### 4ï¸âƒ£ ä¿®æ”¹æ–‡ç« ï¼ˆä»…ä½œè€…ï¼‰

**PUT** `/api/v1/post/:ID`

ç¤ºä¾‹ï¼š

```text
PUT /api/v1/post/1
```

è¯·æ±‚ä½“ï¼š

```json
{
  "title": "æ›´æ–°åçš„æ ‡é¢˜",
  "content": "æ›´æ–°åçš„å†…å®¹"
}
```

æµ‹è¯•ç»“æœï¼šâœ… ä¿®æ”¹æˆåŠŸ

---

### 5ï¸âƒ£ åˆ é™¤æ–‡ç« ï¼ˆä»…ä½œè€…ï¼‰

**DELETE** `/api/v1/post/:ID`

ç¤ºä¾‹ï¼š

```text
DELETE /api/v1/post/1
```

æµ‹è¯•ç»“æœï¼šâœ… åˆ é™¤æˆåŠŸ

---

### 6ï¸âƒ£ è·å–æ–‡ç« åˆ—è¡¨

**GET** `/api/v1/post`

å“åº”ç¤ºä¾‹ï¼š

```json
[
  {
    "id": 1,
    "title": "ç¬¬ä¸€ç¯‡åšå®¢",
    "author": "testuser"
  }
]
```

æµ‹è¯•ç»“æœï¼šâœ… è¿”å›æ–‡ç« åˆ—è¡¨

---

### 7ï¸âƒ£ è·å–æ–‡ç« è¯¦æƒ…

**GET** `/api/v1/post/:ID`

ç¤ºä¾‹ï¼š

```text
GET /api/v1/post/1
```

æµ‹è¯•ç»“æœï¼šâœ… è¿”å›æ–‡ç« è¯¦æƒ…

---

### 8ï¸âƒ£ æ·»åŠ è¯„è®º

**POST** `/api/v1/comment`

è¯·æ±‚ä½“ï¼š

```json
{
  "post_id": 1,
  "content": "å†™å¾—ä¸é”™ï¼"
}
```

æµ‹è¯•ç»“æœï¼šâœ… è¯„è®ºæˆåŠŸ

---

### 9ï¸âƒ£ è·å–æ–‡ç« è¯„è®ºåˆ—è¡¨

**GET** `/api/v1/post/:ID/comment`

ç¤ºä¾‹ï¼š

```text
GET /api/v1/post/1/comment
```

å“åº”ç¤ºä¾‹ï¼š

```json
[
  {
    "id": 1,
    "content": "å†™å¾—ä¸é”™ï¼",
    "user": "testuser"
  }
]
```

æµ‹è¯•ç»“æœï¼šâœ… è¿”å›è¯„è®ºåˆ—è¡¨

---

## ä¹ã€å¸¸è§é—®é¢˜

### Q1ï¼šè¿”å› 401 Unauthorizedï¼Ÿ
- æœªæºå¸¦ Token
- Token å·²è¿‡æœŸ
- Authorization æ ¼å¼é”™è¯¯

### Q2ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥ï¼Ÿ
- æ£€æŸ¥ DSN
- ç¡®è®¤æ•°æ®åº“å·²å¯åŠ¨

---

## åã€åç»­å¯æ‰©å±•æ–¹å‘

- æ–‡ç« æ ‡ç­¾ / åˆ†ç±»
- ç‚¹èµ / æ”¶è—
- è¯„è®ºå›å¤
- ç®¡ç†å‘˜åå°
- æ¥å…¥ Redis / ç¼“å­˜

---

## License

MIT License

